{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sajai\\\\OneDrive\\\\Desktop\\\\Online-Quiz-Platform\\\\frontend\\\\src\\\\pages\\\\TakeQuiz.js\",\n  _s = $RefreshSig$();\nimport { useParams } from \"react-router-dom\";\nimport { useEffect, useState } from \"react\";\nimport BackButton from \"../components/BackButton\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction TakeQuiz() {\n  _s();\n  const {\n    quizId\n  } = useParams();\n  const [quiz, setQuiz] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n  const [selectedAnswers, setSelectedAnswers] = useState({});\n  const [submitted, setSubmitted] = useState(false);\n  const [score, setScore] = useState(null);\n  useEffect(() => {\n    setLoading(true);\n    setError(\"\");\n    fetch(`http://localhost:5000/quiz/${quizId}`).then(async res => {\n      const data = await res.json().catch(() => ({}));\n      if (!res.ok) throw new Error(data.message || `Server error (${res.status})`);\n      return data;\n    }).then(data => setQuiz(data)).catch(err => setError(err.message || \"Failed to load quiz\")).finally(() => setLoading(false));\n  }, [quizId]);\n  async function submitQuiz() {\n    var _quiz$questions;\n    if (!(quiz !== null && quiz !== void 0 && (_quiz$questions = quiz.questions) !== null && _quiz$questions !== void 0 && _quiz$questions.length)) return;\n    let correctCount = 0;\n    quiz.questions.forEach((q, index) => {\n      if (selectedAnswers[index] === q.correct) correctCount++;\n    });\n    setScore(correctCount);\n    setSubmitted(true);\n\n    // Save attempt (optional, but matches your backend)\n    fetch(\"http://localhost:5000/attempt/submit\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        studentId: 10,\n        quizId,\n        answers: selectedAnswers,\n        score: correctCount\n      })\n    }).catch(() => {});\n  }\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: \"Loading quiz\\u2026\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 23\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    style: {\n      color: \"red\"\n    },\n    children: [\"Error: \", error]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 21\n  }, this);\n  if (!quiz) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: \"Quiz not found.\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 21\n  }, this);\n  if (!quiz.questions || quiz.questions.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(BackButton, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: quiz.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"This quiz has no questions yet.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(BackButton, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: quiz.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), !submitted && quiz.questions.map((q, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 20\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: [\"Q\", index + 1, \":\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 15\n        }, this), \" \", q.text]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 13\n      }, this), q.options.map((opt, i) => /*#__PURE__*/_jsxDEV(\"label\", {\n        style: {\n          display: \"block\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"radio\",\n          name: `question-${index}`,\n          checked: selectedAnswers[index] === i,\n          onChange: () => setSelectedAnswers(prev => ({\n            ...prev,\n            [index]: i\n          }))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 17\n        }, this), opt]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 15\n      }, this))]\n    }, index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 11\n    }, this)), !submitted ? /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: submitQuiz,\n      children: \"Submit Quiz\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"Your Score: \", score, \" / \", quiz.questions.length]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n}\n_s(TakeQuiz, \"1NDYE3OobOEM4ArrdIyRDvvPceU=\", false, function () {\n  return [useParams];\n});\n_c = TakeQuiz;\nexport default TakeQuiz;\nvar _c;\n$RefreshReg$(_c, \"TakeQuiz\");","map":{"version":3,"names":["useParams","useEffect","useState","BackButton","jsxDEV","_jsxDEV","TakeQuiz","_s","quizId","quiz","setQuiz","loading","setLoading","error","setError","selectedAnswers","setSelectedAnswers","submitted","setSubmitted","score","setScore","fetch","then","res","data","json","catch","ok","Error","message","status","err","finally","submitQuiz","_quiz$questions","questions","length","correctCount","forEach","q","index","correct","method","headers","body","JSON","stringify","studentId","answers","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","color","title","map","marginBottom","text","options","opt","i","display","type","name","checked","onChange","prev","onClick","_c","$RefreshReg$"],"sources":["C:/Users/sajai/OneDrive/Desktop/Online-Quiz-Platform/frontend/src/pages/TakeQuiz.js"],"sourcesContent":["import { useParams } from \"react-router-dom\";\nimport { useEffect, useState } from \"react\";\nimport BackButton from \"../components/BackButton\";\n\nfunction TakeQuiz() {\n  const { quizId } = useParams();\n\n  const [quiz, setQuiz] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n\n  const [selectedAnswers, setSelectedAnswers] = useState({});\n  const [submitted, setSubmitted] = useState(false);\n  const [score, setScore] = useState(null);\n\n  useEffect(() => {\n    setLoading(true);\n    setError(\"\");\n\n    fetch(`http://localhost:5000/quiz/${quizId}`)\n      .then(async (res) => {\n        const data = await res.json().catch(() => ({}));\n        if (!res.ok) throw new Error(data.message || `Server error (${res.status})`);\n        return data;\n      })\n      .then((data) => setQuiz(data))\n      .catch((err) => setError(err.message || \"Failed to load quiz\"))\n      .finally(() => setLoading(false));\n  }, [quizId]);\n\n  async function submitQuiz() {\n    if (!quiz?.questions?.length) return;\n\n    let correctCount = 0;\n    quiz.questions.forEach((q, index) => {\n      if (selectedAnswers[index] === q.correct) correctCount++;\n    });\n\n    setScore(correctCount);\n    setSubmitted(true);\n\n    // Save attempt (optional, but matches your backend)\n    fetch(\"http://localhost:5000/attempt/submit\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        studentId: 10,\n        quizId,\n        answers: selectedAnswers,\n        score: correctCount,\n      }),\n    }).catch(() => {});\n  }\n\n  if (loading) return <div className=\"container\">Loading quizâ€¦</div>;\n  if (error) return <div className=\"container\" style={{ color: \"red\" }}>Error: {error}</div>;\n  if (!quiz) return <div className=\"container\">Quiz not found.</div>;\n\n  if (!quiz.questions || quiz.questions.length === 0) {\n    return (\n      <div className=\"container\">\n        <BackButton />\n        <h2>{quiz.title}</h2>\n        <p>This quiz has no questions yet.</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container\">\n      <BackButton />\n\n      <h2>{quiz.title}</h2>\n\n      {!submitted &&\n        quiz.questions.map((q, index) => (\n          <div key={index} style={{ marginBottom: 20 }}>\n            <p>\n              <strong>Q{index + 1}:</strong> {q.text}\n            </p>\n\n            {q.options.map((opt, i) => (\n              <label key={i} style={{ display: \"block\" }}>\n                <input\n                  type=\"radio\"\n                  name={`question-${index}`}\n                  checked={selectedAnswers[index] === i}\n                  onChange={() =>\n                    setSelectedAnswers((prev) => ({\n                      ...prev,\n                      [index]: i,\n                    }))\n                  }\n                />\n                {opt}\n              </label>\n            ))}\n          </div>\n        ))}\n\n      {!submitted ? (\n        <button onClick={submitQuiz}>Submit Quiz</button>\n      ) : (\n        <h3>\n          Your Score: {score} / {quiz.questions.length}\n        </h3>\n      )}\n    </div>\n  );\n}\n\nexport default TakeQuiz;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}